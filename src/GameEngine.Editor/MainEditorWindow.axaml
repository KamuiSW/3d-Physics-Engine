<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:GameEngine.Editor.Controls"
        x:Class="GameEngine.Editor.MainEditorWindow"
        Title="Game Engine Editor"
        WindowState="Maximized">

    <Grid RowDefinitions="Auto,Auto,*,Auto">
        <!-- Main Menu -->
        <Menu Grid.Row="0">
            <MenuItem Header="File">
                <MenuItem Header="Save" Command="{Binding SaveCommand}"/>
                <MenuItem Header="Save All" Command="{Binding SaveAllCommand}"/>
                <Separator/>
                <MenuItem Header="Exit" Command="{Binding ExitCommand}"/>
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Undo" Command="{Binding UndoCommand}"/>
                <MenuItem Header="Redo" Command="{Binding RedoCommand}"/>
            </MenuItem>
            <MenuItem Header="Window">
                <MenuItem Header="Reset Layout" Command="{Binding ResetLayoutCommand}"/>
            </MenuItem>
        </Menu>

        <!-- Toolbar -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" Margin="5">
            <Button Command="{Binding PlayCommand}" ToolTip.Tip="Play">
                <PathIcon Data="{StaticResource play_regular}"/>
            </Button>
            <Button Command="{Binding PauseCommand}" Margin="5,0" ToolTip.Tip="Pause">
                <PathIcon Data="{StaticResource pause_regular}"/>
            </Button>
            <Button Command="{Binding StopCommand}" ToolTip.Tip="Stop">
                <PathIcon Data="{StaticResource stop_regular}"/>
            </Button>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="2" ColumnDefinitions="250,*,250">
            <!-- Hierarchy Panel -->
            <Border Grid.Column="0" 
                    BorderBrush="{DynamicResource SystemControlHighlightBaseMediumLowBrush}"
                    BorderThickness="0,0,1,0">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock Text="Hierarchy" 
                             Margin="10,5"
                             FontWeight="Bold"/>
                    <TreeView Grid.Row="1" 
                             ItemsSource="{Binding Scene.RootObjects}"
                             SelectedItem="{Binding SelectedObject}">
                        <TreeView.ItemTemplate>
                            <TreeDataTemplate ItemsSource="{Binding Children}">
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox IsChecked="{Binding IsActive}" 
                                             Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding Name}"/>
                                </StackPanel>
                            </TreeDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                </Grid>
            </Border>

            <!-- Scene View -->
            <controls:SceneView Grid.Column="1" 
                               Name="SceneView"/>

            <!-- Inspector Panel -->
            <Border Grid.Column="2" 
                    BorderBrush="{DynamicResource SystemControlHighlightBaseMediumLowBrush}"
                    BorderThickness="1,0,0,0">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock Text="Inspector" 
                             Margin="10,5"
                             FontWeight="Bold"/>
                    <ScrollViewer Grid.Row="1">
                        <StackPanel Margin="10">
                            <TextBlock Text="Coming soon..."
                                     IsVisible="{Binding !HasSelectedObject}"/>
                            <!-- Component editors will go here -->
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Grid Grid.Row="3" Height="25" Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
            <TextBlock Text="{Binding StatusMessage}" Margin="10,0" VerticalAlignment="Center"/>
        </Grid>
    </Grid>
</Window> 